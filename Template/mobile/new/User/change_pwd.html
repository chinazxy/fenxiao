<include file="Mypublic/header"/>

<body class="bg_white">
<div class="wrap" style="display:block;">
	<!--头部-->
    <style>.wrap{padding-top:50px;display:none;}.wrap.fot{DISPLAY:BLOCK;}</style>
    <div class="header2">
    	<a><i onClick="history.go(-1)"></i><span></span></a>
        <a class="head_preserve">保存</a>
        <p>修改密码</p>
    </div>
    <div id="pageContent">
    <form action='' method="post" class="userform">
      <div class="centent_box  z-myuser">
        
        <div class="z-div margin_oi clearfix" style="border-bottom:none;padding:0;">
		<div class="clearfix boais_sa" >
            <div class="col-xs-4">原密码</div>
            <div class="col-xs-8  pull-right old_pwd"><input name="old_pwd" type="password" value="" placeholder="请输入原密码"></div>
        </div> </div>
       <div class="z-div margin_oi clearfix" style="border-bottom:none;padding:0;">
	<div class="clearfix boais_sa" >
            <div class="col-xs-4">新密码</div>
            <div class="col-xs-8  pull-right new_pwd"><input name="new_pwd" type="password" value="" placeholder="请输入新密码"></div>
        </div> </div>
        <div class="z-div margin_oi border_bottom clearfix" style="border-bottom:none;padding:0;">
		  <div class="clearfix boais_sa" >
            <div class="col-xs-4">确认密码</div>
            <div class="col-xs-8  pull-right new_pwd2"><input name="new_pwd2" type="password" value="" placeholder="请再次输入新密码"></div>
        </div>
      </div>   </div>
    </form>
    <!--<div class="cancel"><a href="{:U('User/logout')}" class="m_btn btn-block label-danger">注销</a></div>-->
    </div>
    
</div>
 <include file="Public/footer"/> 
<script type="text/javascript">
$(function(){
	$('.head_preserve').click(function(){
		var old_pwd = $('.old_pwd').find('input').val();
		var new_pwd = $('.new_pwd').find('input').val();
		var new_pwd2 = $('.new_pwd2').find('input').val();
		var pwdRex = /(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^.{6,16}$/;
		if(new_pwd ==''){
		    $.toast({text:"新密码不能为空"});
            return;
		}
	    if(!pwdRex.test(new_pwd)){
            $.toast({text:"请输入6~16位包含字母和数字的密码"});
            return;
        }
		if(new_pwd != new_pwd2){
		    $.toast({text:"两次密码不一致"});
            return;
		}				
		$.post('',{old_pwd:old_pwd,new_pwd:new_pwd,new_pwd2:new_pwd2},function(resp){
			if(resp){
				alert(resp.info);
                if(resp.status ==1){
                    window.location.href ="{:U('user/index')}";
                }
			}
		});
		
	});

})

	

</script>
</body>
</html>
